# 1. osi 7계층

![[Pasted image 20250723132048.png]]


- 계층이 왜 필요할까? 
	네트워크 통신은 매우 복잡하기 때문에 계층별로 나누어 각각의 역할을 명확히 분담하는 것이 게층 모델의 핵심이다.
- OSI 는 무엇일까?
	Open Systems Interconnection, 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명하기 위해 개발한 모델이다.
	**"이론적인 모델"**

- 왜 이론적이라고 부를까?
	**완전한 7계층 구현체가 없음**
	- 실제 인터넷은 TCP/IP 4계층으로 구현
	- OSI 전체를 그대로 구현한 네트워크는 거의 없음
	
	**세션/표현 계층의 모호함**
	- 5~7계층 경계가 실제로는 명확하지 않음
	- TCP/IP에서는 이를 하나의 응용계층으로 합침
	
	**하지만 개념적 프레임워크로는 매우 실용적**
	- 네트워크 교육의 표준
	- 문제 해결 방법론
	- 기술 커뮤니케이션 도구
	
	결론적으로 OSI는 **"완전한 구현체는 없지만, 개념적 틀로는 현역"** 이다.

> PDU: Protocol data unit, 계층에서 처리하는 데이터의 단위  
> 헤더와 페이로드(Payload)로 구성되어있다.

---
### 7. 응용 계층 (Application Layer)

- 네트워크 자원에 사용자가 접근하는 방법을 제공하는 계층
- 최종적으로 사용자가 볼 수 있는 유일한 계층, 직접적으로 사용자와 상호작용한다.
- ex) 크롬, 사파리 등 웹 브라우저, MS Office와 같은 응용 프로그램
- 프로토콜: HTTP, Telnet, DHCP, DNS, FTP

### 6. 표현 계층 (Presentation Layer)

- 데이터의 변환 작업(인코딩, 디코딩, 암호화)을 하는 계층
- 응용 계층의 데이터 표현에서 독립적인 부분을 나타낸다.
- 프로토콜: ASCII, MPEG, JPEG, EBCDIC

### 5. 세션 계층 (Session Layer)

- 응용 프로그램 간의 연결을 지원하는 계층
- 사용자와 서버 간에 대화가 필요하면 세션을 만드는 작업을 처리한다.
- 운영체제에 의해 세션 설정, 유지, 종료, 전송 중단시 복구 등을 할 수 있다.
- 프로토콜: SSH, TLS

### 4. 전송 계층 (Transport Layer)

- 서비스를 구분하고 데이터의 전송 방식을 담당하는 계층
- 포트(Port)번호를 사용하여 최종 도착지인 프로세스까지 데이터가 도달하게 한다.
- 보낼 데이터의 용량, 속도, 목적지 등을 처리한다.
- 양 끝단의 사용자들이 신뢰성 있는 데이터를 주고 받을 수 있게 해 주어, 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 한다.
- 프로토콜: TCP, UDP, ARP

### 3. 네트워크 계층 (Network Layer)

- 서로 다른 두 네트워크 간의 데이터 전송을 담당한다.
- 데이터에 논리적 주소인 IP 주소를 부여하고 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능(라우팅)을 한다.
- 데이터를 연결된 다른 네트워크로 전달함으로써 인터넷이 가능하게 만드는 계층이다.
- 프로토콜: IP, ICMP, IGMP

### 2. 데이터 링크 계층 (Data Link Layer)

- 컴퓨터와 컴퓨터간 신뢰성있는 전송을 보장하기 위한 계층
- 물리 계층을 통해 송수신되는 정보의 오류를 검출하고 흐름을 관리한다.
- 데이터에 컴퓨터의 물리적 주소인 MAC 주소를 부여해서 출처를 알 수 있게한다.
- 동일한 네트워크 내에서의 데이터 전송을 담당한다.(Ethernet)
- 프로토콜: MAC, PPP, HDLC, etc...

### 1. 물리 계층 (Physical Layer)

- 네트워크의 하드웨어 전송 기술로 구성
- 전기적, 기계적, 기능적인 특성을 이용하여 통신 케이블로 데이터를 전송한다.
- 단지 데이터를 전달만 한다.
- 프로토콜: Ethernet, RS-232C

### 장점

- 통신이 일어나는 과정을 단계별로 파악하기 쉽다.
- 특정 계층에서 이상이 생기면 해당 계층만 고치면 된다.


# 2. 캡슐화와 역캡슐화

![[Pasted image 20250723132858.png]]

## 캡슐화 

- 송신 시 각 계층에서 헤더를 추가해 나가는 과정

ex) **캡슐화**는 선물을 여러 겹으로 포장하는 것과 같다.
- 선물 → 포장지 → 박스 → 택배 상자 → 택배 라벨

### 캡슐화 과정
#### 송신자 측: 상위 계층 → 하위 계층

```
사용자 데이터: "안녕하세요"
      ↓
[응용 계층] HTTP Header + "안녕하세요" → HTTP Data
      ↓  
[전송 계층] TCP Header + HTTP Data → TCP Segment
      ↓
[네트워크 계층] IP Header + TCP Segment → IP Packet
      ↓
[데이터링크 계층] Ethernet Header + IP Packet + Trailer → Ethernet Frame
      ↓
[물리 계층] Frame을 전기신호(비트)로 변환 → Bits
```

### 각 계층에서 추가되는 정보

**응용 계층**

- HTTP 헤더: `GET /index.html HTTP/1.1`
- 어떤 웹페이지를 요청하는지 정보

**전송 계층 (TCP)**

- 출발지 포트: `8080` (내 브라우저)
- 목적지 포트: `80` (웹서버)
- 순서 번호, 확인 번호 등

**네트워크 계층 (IP)**

- 출발지 IP: `192.168.1.100` (내 컴퓨터)
- 목적지 IP: `203.252.74.146` (네이버 서버)
- TTL, 프로토콜 타입 등

**데이터링크 계층 (Ethernet)**

- 출발지 MAC: `AA:BB:CC:DD:EE:FF` (내 랜카드)
- 목적지 MAC: `11:22:33:44:55:66` (공유기)
- 프레임 체크 시퀀스 (오류 검출)


---

## 역캡슐화
- 수신 시 각 계층에서 헤더를 제거해 나가는 과정

ex) **역캡슐화**는 받은 선물의 포장을 하나씩 뜯는 것이다.
- 택배 라벨 확인 → 택배 상자 열기 → 박스 열기 → 포장지 뜯기 → 선물 확인

### 역캡슐화 (Decapsulation) 과정

#### 수신자 측: 하위 계층 → 상위 계층

```
전기신호 수신 → Bits
      ↓
[물리 계층] 비트를 프레임으로 변환
      ↓
[데이터링크 계층] Ethernet Header 제거 → IP Packet 추출
      ↓
[네트워크 계층] IP Header 제거 → TCP Segment 추출  
      ↓
[전송 계층] TCP Header 제거 → HTTP Data 추출
      ↓
[응용 계층] HTTP Header 제거 → "안녕하세요" 추출
```

### 각 계층에서 하는 일

**물리 계층**

- 전기신호를 디지털 데이터로 변환
- "이 신호가 프레임이구나!"

**데이터링크 계층**

- MAC 주소 확인: "이게 내 주소 맞나?"
- 오류 검사: "데이터가 손상되지 않았나?"
- Ethernet 헤더 제거 후 상위 계층으로 전달

**네트워크 계층**

- IP 주소 확인: "이게 내 IP 맞나?"
- TTL 감소, 라우팅 테이블 확인
- IP 헤더 제거 후 상위 계층으로 전달

**전송 계층**

- 포트 번호 확인: "80번 포트로 온 데이터구나"
- TCP 순서 확인, ACK 전송
- TCP 헤더 제거 후 상위 계층으로 전달

**응용 계층**

- HTTP 헤더 분석: "GET 요청이네"
- 최종 데이터 "안녕하세요" 추출




# 3.  TCP/IP 4계층

현재의 인터넷에서 컴퓨터들이 서로 정보를 주고받는데 쓰이는 프로토콜의 모음
- OSI 모델을 기반으로 실제 사용될 수 있도록 단순화된 모델


### 4. Application Layer

- OSI 계층에서 5,6,7 계층에 해당한다.
- 사용자가 응용프로그램과 소통할 수 있게 UI를 제공한다.
- TCP/IP 기반의 응용 프로그램을 구분할 때 사용한다.
    
    > TCP/IP 소켓 프로그래밍 (네트워크 프로그래망): 운영체제의 전송 계층에서 제공하는 API를 활용해서 통신 가능한 프로그램을 만드는 것
    

### 3. Transport Layer

- OSI 계층에서 전송 계층에 해당한다.
- 데이터의 송수신을 담당하고 통신 노드 간의 연결을 제어한다.
- 네트워크 양단의 송수신 호스트 사이에서 신뢰성 있는 전송기능을 제공한다.

대표적인 프로토콜은 `TCP`와 `UDP`가 있다.

### 2. Internet Layer

- OSI 7계층의 네트워크 계층에 해당한다.
- 논리적 주소인 IP를 이용한 노드간 데이터 전송과 라우팅 기능을 담당한다.

### 1. Network Access Layer

- OSI 계층의 1,2 계층에 해당한다.
- 운영체제의 하드웨어적인 요소와 관련되는 모든 것을 지원하는 계층이다.
- 물리적으로 데이터가 네트워크를 통해 어떻게 전송되는지 정의한다.
- 에러 검출 기능과 패킷의 프레임화 기능을 담당한다.


## OSI 와 TCP/IP  두 모델 간 비교

### 계층 매핑

```
OSI 7계층          TCP/IP 4계층
-----------        --------------
응용 계층    \
표현 계층     } --> 응용 계층
세션 계층    /
전송 계층    ----> 전송 계층
네트워크 계층 ----> 인터넷 계층
데이터링크 계층} --> 네트워크 인터페이스 계층
물리 계층    /
```

![[Pasted image 20250723133424.png]]

- TCP/IP가 OSI 모델보다 먼저 개발되었다.
- 두 모델 모두 계층형이지만 서로의 계층이 정확히 일치하지는 않는다.
- TCP/IP는 인터넷 개발 이후 계속 표준화되어 신뢰성이 높지만 OSI모델은 실제로 구현되는 예가 거의 없어서 신뢰성이 낮다.
- OSI 모델은 장비 개발과 통신 자체를 어떻게 표준으로 잡을지 개념적으로 사용되는 반면 실질적인 통신 자체는 TCP/IP 프로토콜을 사용한다.

### OSI 모델

- **장점**: 표준화된 이론 모델, 교육용으로 우수
- **단점**: 복잡함, 실제 구현과 차이
- **특징**: 7계층으로 세분화

### TCP/IP 모델

- **장점**: 실제 인터넷 기반, 단순함
- **단점**: 이론적 체계성 부족
- **특징**: 4계층으로 단순화










- 참고
https://velog.io/@yun8565/OSI-7%EA%B3%84%EC%B8%B5%EA%B3%BC-TCPIP-4%EA%B3%84%EC%B8%B5