## WebSocket의 정의

**WebSocket**은 **클라이언트와 서버 간에 지속적인 양방향 통신을 가능하게 하는 통신 프로토콜**입니다. HTTP와 달리 연결이 한 번 맺어지면 지속적으로 유지되며, 실시간으로 데이터를 주고받을 수 있습니다.

---

## WebSocket의 특징

### 1. 양방향 통신 (Full-Duplex)

- **클라이언트와 서버가 동시에** 데이터를 주고받을 수 있음
- 서버에서 클라이언트로 **먼저 데이터를 보낼 수 있음**
- 실시간 상호작용 가능

### 2. 지속적인 연결 (Persistent Connection)

- **한 번 연결하면 계속 유지**
- 매번 새로운 연결을 맺을 필요 없음
- **Connection overhead 감소**

### 3. 낮은 지연시간 (Low Latency)

- HTTP 요청/응답 사이클 없이 **즉시 데이터 전송**
- **실시간 애플리케이션에 최적**

### 4. 프로토콜 업그레이드

- **HTTP에서 WebSocket으로 프로토콜 전환**
- 초기 핸드셰이크는 HTTP로, 이후 WebSocket 프로토콜 사용

---

## HTTP와 WebSocket의 차이점

|구분|HTTP|WebSocket|
|---|---|---|
|**통신 방식**|요청-응답 (Request-Response)|양방향 (Full-Duplex)|
|**연결 방식**|무상태 (Stateless)|지속적 연결 (Persistent)|
|**데이터 전송**|클라이언트가 먼저 요청해야 함|서버가 먼저 전송 가능|
|**오버헤드**|매 요청마다 헤더 정보 전송|초기 핸드셰이크 후 최소한의 오버헤드|
|**실시간성**|폴링/롱폴링으로 구현 (비효율적)|진정한 실시간 통신|
|**사용 포트**|80 (HTTP), 443 (HTTPS)|80 (WS), 443 (WSS)|

### HTTP 통신 과정

```
1. 클라이언트 → 서버: HTTP 요청
2. 서버 → 클라이언트: HTTP 응답
3. 연결 종료
4. 새로운 데이터 필요 시 1~3 반복
```

### WebSocket 통신 과정

```
1. 클라이언트 → 서버: WebSocket 핸드셰이크 (HTTP 업그레이드)
2. 서버 → 클라이언트: 핸드셰이크 응답
3. 연결 유지 상태에서 양방향 데이터 전송
4. 필요시까지 연결 지속
```

---

## WebSocket 동작 원리

### 1. 핸드셰이크 과정

#### 클라이언트 요청

```http
GET /chat HTTP/1.1
Host: example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
Sec-WebSocket-Version: 13
```

#### 서버 응답

```http
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
```

### 2. 데이터 전송

- 핸드셰이크 완료 후 **WebSocket 프레임** 형태로 데이터 전송
- **텍스트 또는 바이너리** 데이터 모두 지원
- **최소한의 오버헤드**로 효율적 전송


