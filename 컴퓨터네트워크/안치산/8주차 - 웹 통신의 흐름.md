### **2주차: 웹 통신의 흐름 파악하기** 🌐
* **DNS** (동작 원리, Recursive vs Iterative Query)
* **HTTP/1.1** (특징, 주요 메서드, 멱등성)
* **HTTP 상태 코드** (2xx, 3xx, 4xx, 5xx)
* **HTTPS**와 **SSL/TLS** (필요성, Handshake 과정)
* **웹 통신 흐름** ("`google.com` 입력 시 발생하는 일" 종합)

---

- HTTP/1.0 이전
    - Connectionless (비연결성)
    - Stateless (무상태성)
- HTTP/1.0
    - HTTP 상태코드 도입 (웹이 단순한 문서 전송 시스템을 넘어, 프로그램 간에 정교하게 상호작용하는 애플리케이션 플랫폼으로 발전하는 데 있어 가장 중요한 기반을 마련해 준 핵심적인 특징)
    - HTTP 헤더, HTTP 메서드 도입
- HTTP/1.1 (HTTP/1.0의 비효율을 개선하고 성능을 향상시키는 데 중점을 둔 버전)
    - Persistent Connections (지속적 연결)
    - Pipelining
        - Pipelining은 Persistent Connections 없이는 구현 불가

- ? HTTP/1.1에서 Pipelining 특징에 따르면 응답을 기다리지 않고 다음 요청을 보낼 수 있음에도 HOL (Head-of-Line) Blocking 문제가 해결되지 않은 이유는?
    - 요청에 대한 응답은 차례대로 보내야했기 때문
- ? HTTP/1.1의 Pipelining은 어떤 문제를 해결하기 위해 등장했을까?
    - RTT(Round Trip Time)로 인한 대기
- ? HTTP/1.1의 HOL Blocking 문제를 해결하기 위해 등장한 HTTP/2의 Multiplexing은 어떻게 동작하며, HTTP/3가 UDP 기반의 QUIC를 채택한 근본적인 이유는 무엇일까요?
    - HTTP/2: 애플리케이션 레벨의 HOL Blocking 문제 해결
    - HTTP/3: TCP 레벨의 HOL Blocking 문제 해결 (TCP는 패킷의 순서를 엄격하게 보장하기 때문)

- ? 쿠키, 세션은 HTTP와는 별개의 개념?
    - HTTP의 무상태성이라는 한계를 보완하기 위해 HTTP와 함께 동작하도록 만들어진 기술 (HTTP 프로토콜의 헤더 구조를 활용하여 동작하는 기술)
    - 세션은 쿠키를 '통행증'처럼 사용하여 HTTP의 무상태성을 극복
    - HTTP/1.0 도입 직후 쿠키(Cookie) 등장 -> 쿠키를 활용한 세션(Session) 등장

- ? DNS 동작 과정
    - 브라우저 캐시, OS 캐시, 리졸버, TLD 서버
- ? 멱등성은 무엇이고, HTTP의 POST 요청에 대해서도 멱등성을 보장할 수 있을까?
    - https://docs.tosspayments.com/blog/what-is-idempotency
    - 결제나 주문과 같이 중복 처리가 치명적인 경우 '멱등성 키(Idempotency Key)' 패턴을 사용하여 멱등성을 보장할 수 있습니다.

- ? 대규모 서비스에서 DNS는 단순히 IP 주소를 매핑하는 것을 넘어 어떤 역할(예: 트래픽 분산, 장애 극복)을 수행할 수 있으며, 이를 위해 사용되는 DNS 레코드 타입에는 어떤 것들이 있나요?
    - 대규모 서비스에서 DNS는 단순히 도메인 이름을 IP 주소로 변환하는 '인터넷 전화번호부' 역할을 넘어, 서비스의 안정성과 효율성을 책임지는 지능적인 트래픽 관리자(Intelligent Traffic Manager) 역할을 수행합니다.
        - 1. 트래픽 분산: 하나의 도메인 이름에 여러 개의 서버 IP 주소를 연결하여, 사용자들의 요청이 특정 서버에 몰리지 않도록 나누어줌
        - 2. 장애 극복: 운영 중인 서버나 데이터 센터에 장애가 발생했을 때, 자동으로 건강한(Healthy) 상태의 다른 서버로 트래픽을 전환하여 서비스 중단을 방지
    - 주요 DNS 레코드 타입
        - ![[Pasted image 20250730103409.png]]
        - **A / AAAA 레코드 (직접 연결)**
            - **역할**: 도메인 이름을 실제 서버의 IP 주소(A: IPv4, AAAA: IPv6)에 직접 매핑합니다.
            - **동작**: 브라우저가 이 레코드를 받으면, 더 이상의 질문 없이 **즉시 해당 IP 주소로 접속을 시도**합니다. 가장 직접적이고 최종적인 연결 정보입니다.
        - **CNAME 레코드 (별명/대리인)**
            - **역할**: 하나의 도메인 이름을 다른 도메인 이름으로 연결하는 **별칭**입니다. IP 주소를 직접 가리키지 않습니다.
            - **동작**: CNAME은 **DNS 조회 단계가 한 번 더 필요**합니다.
                1. 브라우저가 `api.hi-meow.kro.kr`의 IP를 DNS 서버에 물어봅니다.
                2. DNS 서버는 "그 이름의 진짜 주인은 `annyang-alb-260...amazonaws.com`이니, 그쪽으로 다시 물어보세요"라고 응답합니다.
                3. 브라우저는 응답받은 `annyang-alb-260...amazonaws.com`의 IP 주소를 다시 DNS 서버에 물어보고, 최종 IP 주소를 받아 접속합니다.
                - **이미지 속 다른 CNAME의 역할**
                    - `_f3fd...`: AWS의 SSL 인증서(ACM)를 발급할 때, 해당 도메인의 소유권을 증명하기 위한 인증용 레코드입니다.
                    - `d1ft9f...`: 도메인을 AWS CloudFront(CDN 서비스)에 연결할 때 사용합니다.
            - **MX 레코드 (메일 서버 전용)**
                - **역할**: 해당 도메인의 이메일을 처리하는 **메일 교환 서버(Mail eXchange)**가 어디인지를 알려줍니다.
                - **동작**: 일반 브라우저는 이 레코드를 조회하지 않습니다. 다른 메일 서버가 `user@hi-meow.kro.kr`로 이메일을 보내려고 할 때, **MX 레코드를 조회**하여 메일을 전달할 서버의 주소를 찾아냅니다. `prio`는 우선순위로, 숫자가 낮을수록 먼저 시도합니다.
            - **TXT 레코드 (부가 정보)**
                - **역할**: 도메인에 대한 텍스트 정보를 기록합니다. 트래픽을 직접 보내는 역할이 아니라, **도메인의 정책이나 소유권을 증명**하는 데 사용됩니다.
                - **동작**:
                    - **SPF (Sender Policy Framework)**: 이미지의 예시(`v=spf1...`)처럼, 이 도메인 이름으로 이메일을 보낼 수 있도록 허락된 메일 서버의 IP 목록을 기록합니다. 수신 측 메일 서버는 이 정보를 조회하여 스팸 메일을 필터링합니다. 클라이언트가 이 주소로 접속하는 일은 없습니다.
    - 구글, 네이버와 같은 대규모 기업들은 거의 예외 없이 자체 DNS 서버를 직접 구축하고 운영함
        - 성능과 속도 (Performance and Speed) 🚀
            - 전 세계 사용자와 가장 가까운 곳에서 DNS 질의에 응답하기 위해 전 세계 곳곳에 자체 DNS 서버를 배치합니다. 애니캐스트(Anycast) 기술을 사용하여 사용자가 어디서 접속하든 가장 가까운 서버가 응답하게 함으로써, IP 주소를 받아 오는 데 걸리는 지연 시간(Latency)을 수 밀리초(ms) 단위로 최소화합니다.
        - 완벽한 트래픽 제어 (Total Traffic Control) 🚦
            - 앞서 이야기한 GeoDNS(위치 기반 라우팅), 트래픽 분산, 상태 확인(Health Check)에 기반한 자동 장애 극복(Failover) 등의 고급 기능을 자사 서비스에 맞게 직접 구현하고 제어할 수 있습니다. 이는 외부 DNS 서비스로는 불가능한 수준의 세밀한 트래픽 관리를 가능하게 합니다.
        - 보안과 안정성 (Security and Stability) 🛡️
            - DNS는 인터넷 서비스의 가장 첫 관문이므로, 디도스(DDoS) 공격과 같은 보안 위협에 매우 중요하게 노출됩니다. 자체 DNS 인프라를 운영하면 공격에 대응하는 보안 정책을 직접 적용하고, 대규모 공격을 방어할 수 있는 독자적인 시스템을 구축하여 서비스 안정성을 극대화할 수 있습니다.
        - 확장성과 맞춤 기능 (Scalability and Custom Features) 🛠️
            - 수십억 건에 달하는 DNS 요청을 문제없이 처리할 수 있도록 시스템을 무한히 확장할 수 있습니다. 또한, 자사 서비스에 필요한 특별한 DNS 기능을 직접 개발하여 적용하는 등 비즈니스 요구사항에 신속하게 대응할 수 있습니다.

- ? SSL/TLS Handshake 과정에서, 서버의 **공개키(비대칭키)**로 통신 내용을 직접 암호화하지 않고, 굳이 더 빠르다는 **대칭키(세션 키)**를 하나 더 만들어 교환하는 이유는 무엇인가요? 비대칭키 암호화의 **연산 비용(속도)** 관점에서 설명하고, 만약 모든 통신을 비대칭키로만 처리한다면 어떤 **현실적인 문제**가 발생할 수 있을까요?

