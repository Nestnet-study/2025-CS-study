## **Red-Black Tree**

### **Red-Black Tree의 특성**

다음의 레드블랙 특성을 만족하는 이진 검색 트리를 레드블랙 트리라 한다.

1. 루트노드는 블랙이다.
2. 모든 리프노드는 블랙이다.
   - 이 때 리프 노드는 일반적인 리프 노드가 아니라 T.nil을 가리키고 T.nil은 루트 노드를 가리키고있다.
3. 노드가 레드이면 그 노드의 자식은 반드시 블랙이다.
4. 루트 노드에서 임의의 리프 노드에 이르는 경로들은 모드 같은 수의 블랙노드를 포함한다.

![](https://github.com/jjj5306/jjj5306.github.io/raw/main/Algorithm/img/red_black_tree.PNG)

### **레드블랙 트리에서의 삽입**

기본적으로 이진 검색 트리와 같으며 삽입되는 노드는 항상 레드이다.

삽입되는 노드의 부모가 블랙이면 그냥 삽입하면 된다.

삽입되는 노드의 부모가 레드이면 아래와 같이 케이스를 나누어서 처리한다.

1. 부모의 형제가 레드인경우, Color Flip을 통해 할아버지와, 부모, 부모의 형제의 색을 바꾼다.

   이 때, 할아버지의 색을 레드로 바꾸게 되는데, 또 레드 노드가 두 개가 생길 수 있으므로 재귀적으로 부모가 검은색이거나 루트에 도달할 떄 까지 검사해줘야 한다.

2. 부모의 형제가 블랙이면 Restructuring을 수행한다.

   Restructuring은 새로운 노드(N), 부모 노드(P), 조상 노드(G)를 오름차순으로 정렬한다. 그리고 셋 중 중간값을 부모로 만들고 색을 바꾼다.

3, 1, 5, 7, 6 순으로 삽입될 때 최종 레드블랙 트리의 구성 과정을 예시로 살펴보자.

![](https://github.com/jjj5306/jjj5306.github.io/raw/main/Algorithm/img/red_black_tree_insert.PNG)

### **Red-Balck Tree 분석**

키가 총 `n`개인 레드블랙 트리의 최대 깊이는 **O(log n)** 이다.

루트에서 임의의 리프에 이르는 경로의 블랙 노드는 모두 블랙 노드로 이루어져 있어도 **log n + 1**을 넘을 수 없다.또 레드노드는 두 개 연속으로 존재할 수 없으므로 임의의 리프에 이르는 총 길이는 **2\*(log n + 2)** 를 넘을 수 없다.
